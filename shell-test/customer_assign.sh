#!/usr/bin/evn bash

## uid列表文件格式：每行一个uid
## sales_id与sales_path 手动指定
UidFile="/data/temp/uids.txt"
if [ "$1" != "" ]; then
    UidFile=$1
fi

if [ ! -f "${UidFile}" ]; then
    echo -e "\033[31m 请指定uid文件 \033[0m"
    exit
fi

if [ "$2" == "" ]; then
    echo -e "\033[31m 请指定分配的sales_id \033[0m"

    echo -e "\n===============================\n bash customer_assign.sh /data/temp/uids.txt 3096 \"1;721;3096;\" \n=============================== \n"
    exit
fi

if [ "$3" == "" ]; then
    echo -e "\033[31m 请指定分配的sales_path \033[0m"

    echo -e "\n===============================\n bash customer_assign.sh /data/temp/uids.txt 3096 \"1;721;3096;\" \n=============================== \n"
    exit
fi

uids=$(cat $UidFile)

for uid in ${uids[@]}; do
    upSql="UPDATE xxxx_newcrm.customer_collect SET sales_id=$2, sales_path='$3', status=0 WHERE uid=${uid}"

    echo $upSql
    exit;

    inSql="INSERT INTO xxxx_newcrm.customer_assign_logs SET uid=${uid},sales_id=$2, sales_path='$3', scopes='collect', assign_time=unix_timestamp(), note='[手动分配]邀请用户划分给电销'"
    echo "${upSql};" | echo "${inSql};" | mysql -h 10.1.16.162 -uroot -pPebGNKFfzf\&\%\!\@ --default-character-set=utf8

    # echo "${upSql};" | echo "${inSql};" | mysql -uoa_crm -pG\$v5sRgoxk2l -h10.1.1.140 --default-character-set=utf8
    if [ $? -eq 0 ]; then
        echo -e "\033[32mUID: ${uid} Execute Success \033[0m"
    else
        echo -e "\033[31m UID: ${uid} Execute Failed \033[0m"
    fi
done;

# UidList=(2003961 2042283 2046342 2058670 2514974 2545696 2711821 2737745 2783526 2816317 2837382 2898381 3028441 3198908 3230014 3245497 3472768 3498040 3514303 3534188 3627444 3760195 3813421 3835483 3880902 3963791 4230196 4260188 4323505 4325534 4368815 4431650 4454366 4508076 4594296 4598240 4708019 4821554 4830232 4858373 5024663 5133242 5135974 5163735 5185178 5535783 5536370 5536514 5541023 5543620 5543782 5544303 5544934 5546574 5546645 5549709 5551185 5551575 5554354 5556502 5558018 5558158 5559228 5559234 5559418 5561435 5561655 5566128 5566940 5567995 5571294 5571298 5571301 5571833 5571862 5573019 5574279 5574788 5574832 5576306 5578277 5578329 5588983 5594562 5594668 5597083 5597665 5599222 5603283 5610554 5612303 5616555 5617542 5617753 5621141 5626756 5634743 5638730 5639830 5647151 5649503 5649594 5651166 5655562 5655575 5655625 5655899 5659574 5664133 5665168 5668652 5670267 5670665 5672298 5672321 5672386 5673453 5675938 5676094 5676432 5676587 5679359 5679470 5679792 5685613 5688452 5694256 5705439 5706857 5707304 5707386 5707396 5709303 5710115 5712444 5713498 5714474 5714568 5714687 5715925 5716487 5716907 5717044 5717079 5718806 5719128 5720025 5720660 5721692 5726875 5727726 5727738 5729931 5730333 5730655 5731105 5731465 5732691 5733620 5734098 5734107 5735169 5736901 5737082 5737481 5737817 5738510 5738755 5738915 5740354 5740471 5740475 5740678 5740742 5740776 5740930 5740957 5741137 5741303 5742090 5742448 5742596 5742625 5743557 5743847 5743869 5743981 5746114 5746709 5746959 5747279 5747305 5747811 5747815 5748433 5748624 5748767 5749081 5749176 5750216 5750283 5750644 5750702 5750785 5750795 5751686 5752874 5753013 5753315 5753410 5754443 5755760 5756154 5756541 5759721 5759755 5759773 5759891 5759897 5762280 5762573 5763535 5763633 5764368 5765438 5768324 5781364 5782098 5783644 5785679 5785809 5787106 5788957 5789274 5789341 5792781 5792879 5794081 5795369 5795943 5796289 5796300 5796413 5796736 5796968 5798720 5799482 5799506 5799762 5802801 5802802 5803681 5803682 5804235 5804893 5805135 5805842 5806311 5807590 5807829 5808188 5809211 5809487 5810279 5810822 5811729 5811738 5812019 5812332 5812842 5812963 5812975 5813243 5813286 5813328 5813334 5813397 5813426 5813477 5814046 5814051 5814120 5814137 5814234 5817268 5817479 5817482 5819757 5821062 5822535 5823153 5824847 5826327 5827420 5827553 5828316 5829655 5831121 5831386 5831707 5832436 5833362 5833657 5833895 5833962 5834709 5836478 5836786 5837425 5837549 5837692 5841024 5842701 5843260 5844177 5845167 5845825 5846363 5849445 5850418 5850439 5850869 5852429 5852575 5853662 5854041 5856404 5857582 5865712 5868615 5868676 5868725 5868792 5869035 5869057 5869082 5869236 5870705 5871070 5871104 5873540 5876329 5878879 5879571 5880370 5881355 5883586 5885504 5885703 5885930 5886275 5886923 5886960 5887465 5889841 5890931 5891322 5891343 5892007 5893450 5894698 5895009 5895621 5897247 5899415 5899742 5900031 5900823 5900875 5901290 5901885 5903388 5903875 5904092 5904312 5904598 5905620 5909760 5912889 5914933 5916115 5920142 5922164 5926376)
# for uid in ${UidList[@]}; do

#     sql="INSERT INTO xxxx_newcrm.customer_assign_logs SET uid=${uid},sales_id=3096, sales_path='1;721;3096;', scopes='collect', assign_time=unix_timestamp(), note='[手动分配]邀请用户划分给电销';"
#     # echo "${sql};" | mysql -h 10.1.16.162 -uroot -pPebGNKFfzf\&\%\!\@ --default-character-set=utf8

#     echo "${sql};" | mysql -uoa_crm -pG\$v5sRgoxk2l -h10.1.1.140 --default-character-set=utf8

#     if [ $? -eq 0 ]; then
#         echo -e "\033[32mUID: ${uid} Execute Success \033[0m"
#     else
#         echo -e "\033[31m UID: ${uid} Execute Failed \033[0m"
#     fi

# done;