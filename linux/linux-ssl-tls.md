
## SSL (Secure Socket Layer，安全套接字层)

为netScape所研发，用以保障internet上数据传输之安全，利用数据加密技术，可确保数据在网络上之传输过程中不会被
截取．当前版本为3.0．通常被广泛应用于web浏览器与服务器之间的身份认证和加密数据传输

SSL协议位于Tcp/ip协议与各种应用层协议之间，为数据通讯提供安全支持．SSL协议可分为两层：

* ssl记录协议(ssl record protocol)

    建立于可靠　的传输协议(如Tcp)之上，为高层协议提供数据封装＼压缩＼加密等基本功能的支持．

* ssl 握手协议(ssl handshake protocol)

    建立于ssl记录协议之上，用于实际的数据传输开始前，通讯双方进行身份认证＼协商加密算法＼交换加密密钥等

## TLS (Transport Layer Security, 传输层安全协议)

用于两个应用程序之间提供保密性和数据完整性，IETF(Internet Engineering Task Force)制定的一种新的协议，建立于ssl3.0
协议规范之上．


>SSL/TLS协议提供的服务主要有：
1. 认证用户和服务器，确保数据发竤到正确的客户机和服务器
2. 加密数据以防止数据中途被　窃取
3. 维护数据的完整性，确保数据在传输过程中不被改变


## 密钥协商过程

SSL协议分为两部分:Hand shake protocol 和Record Protocol. 其中handshake protocol 用来协商密钥，协议的大部分内容就是通过
双方如何利用它来安全的协商出一份密钥．　Record Protocol则是定义传输的格式

> 由于非对称加密的速度比较慢，所以它一般用于密钥交换，双方通过公钥算法协商出一份密钥，然后通过对称加密来通信，当然
为了保证数据的完整性，在加密前要先经过HMAC处理．


## SSL安全性

SecurityPortal 在2000年底有一份文章<<The End of SSL and SSH>>激起了很多的讨论，目前也有一些成熟的工具如[dsniff](https://www.monkey.org/~dugsong/dsniff/)
可以通过man in the middle攻击来截获https的消息

从上面的原理可知，ssl 的结构是严谨的，问题一般出现在实际不严谨的应用中．常见的攻击就是middle in the middle攻击，
它指在A和B通信的同时，有第三方C处于信道的中间，可以完全听到A与B通信的消息，并可拦截，替换和添加这些消息．
    1. SSL 可以允许多种密钥交换算法，而有些算法如DH，没有证书的概念，这样A便无法验证B的公钥和身份的真实性，而C
    可以轻易冒充，用自已的密钥与双方通信，从而窃听到别人谈话内容
    2. 有了证书以后，如果C用自己的证书替换原有的证书之后，A的浏览器会弹出一个警告，但又有多少　会注意这个警告？
    3. 由于美国密码出口的限制，IE, netscape等浏览器所支持的加密强度是很弱的，如果采用浏览器自带的加密功能的话
    理论上丰在被破解的可能